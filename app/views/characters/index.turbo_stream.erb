<% if params[:search].present? %>
  <%= turbo_stream.replace "characters" do %>
    <%= render partial: "character", collection: @characters %>
  <% end %>
  <%= turbo_stream.replace "cantidad-visible" do %>
    <%= @loaded_characters %>
  <% end %>
  <%= turbo_stream.replace "total-characters" do %>
    <%= @total_characters %>
  <% end %>
<% else %>
  <%= turbo_stream.append "characters" do %>
    <%= render partial: "character", collection: @characters %>
  <% end %>
  <%= turbo_stream.update "cantidad-visible" do %>
    <%= @loaded_characters %>
  <% end %>
<% end %>

<% if @next_page && params[:search].blank? %>
  <%= turbo_stream.replace "load_more" do %>
    <%= turbo_frame_tag "load_more", src: characters_path(page: @next_page, limit: @limit, format: :turbo_stream), loading: :lazy do %>
      <div class="p-4 text-center text-gray-500">Cargando m√°s...</div>
    <% end %>
  <% end %>
<% else %>
  <%= turbo_stream.remove "load_more" %>
<% end %>
